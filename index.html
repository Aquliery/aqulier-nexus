<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aqulier Nexus | AI Intelligence</title>
    <style>
        :root {
            --primary: #00ff41;
            --bg: #0d0d0d;
            --dim: #008f11;
            --alert: #ff3333;
        }
        body {
            background-color: var(--bg);
            color: var(--primary);
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            margin: 0;
            overflow: hidden;
        }
        .crt-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 10;
        }
        h1 { text-shadow: 0 0 10px var(--primary); letter-spacing: 5px; margin-bottom: 3rem; }
        
        .main-interface {
            border: 1px solid var(--dim);
            padding: 3rem;
            width: 500px;
            max-width: 90%;
            background: rgba(0, 20, 0, 0.8);
            box-shadow: 0 0 30px rgba(0, 255, 65, 0.1);
            position: relative;
        }

        .input-group { text-align: center; }
        
        input {
            background: transparent;
            border: none;
            border-bottom: 2px solid var(--dim);
            color: #fff;
            font-size: 2rem;
            text-align: center;
            width: 100%;
            margin: 1rem 0;
            outline: none;
            font-family: inherit;
            text-transform: uppercase;
            transition: border-color 0.3s;
        }
        input:focus { border-bottom-color: var(--primary); }

        button {
            background: var(--dim);
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            margin-top: 1rem;
            font-family: inherit;
            width: 100%;
        }
        button:hover { background: var(--primary); box-shadow: 0 0 15px var(--primary); }

        /* Terminal Logs Style */
        .terminal-window {
            margin-top: 2rem;
            text-align: left;
            font-size: 0.85rem;
            height: 150px;
            overflow-y: auto;
            border-top: 1px dashed var(--dim);
            padding-top: 1rem;
            display: none; /* Hidden by default */
        }
        .log-line { margin: 5px 0; opacity: 0; animation: fadeIn 0.1s forwards; }
        .log-time { color: #666; margin-right: 10px; }
        .log-success { color: var(--primary); }
        .log-warn { color: #ffff00; }
        .log-error { color: var(--alert); }

        @keyframes fadeIn { to { opacity: 1; } }
        
        /* Result Box */
        .result-box {
            display: none;
            border: 1px solid var(--primary);
            padding: 1rem;
            margin-top: 2rem;
            text-align: left;
        }
        .score-display { font-size: 2.5rem; font-weight: bold; }
    </style>
</head>
<body>
    <div class="crt-overlay"></div>
    <h1>AQULIER NEXUS</h1>
    
    <div class="main-interface">
        <div class="input-group">
            <label>TARGET ASSET</label>
            <input type="text" id="ticker" placeholder="BTC" value="BTC">
            <button onclick="startSequence()">[ INITIALIZE SEQUENCE ]</button>
        </div>

        <div class="terminal-window" id="terminal"></div>

        <div class="result-box" id="result">
            <div id="result-content"></div>
        </div>
    </div>

    <script>
        const terminal = document.getElementById('terminal');
        
        function log(msg, type='info') {
            const div = document.createElement('div');
            div.className = 'log-line';
            const time = new Date().toLocaleTimeString('en-US', {hour12: false});
            
            let colorClass = '';
            if(type === 'success') colorClass = 'log-success';
            if(type === 'warn') colorClass = 'log-warn';
            if(type === 'error') colorClass = 'log-error';

            div.innerHTML = `<span class="log-time">[${time}]</span> <span class="${colorClass}">${msg}</span>`;
            terminal.appendChild(div);
            terminal.scrollTop = terminal.scrollHeight;
        }

        async function startSequence() {
            const ticker = document.getElementById('ticker').value;
            if(!ticker) return;

            // Reset UI
            document.querySelector('.terminal-window').style.display = 'block';
            document.getElementById('result').style.display = 'none';
            terminal.innerHTML = ''; // Clear logs

            // Simulation Sequence
            log(`System initialized. Target: ${ticker}`, 'info');
            await delay(600);
            log(`Connecting to SKALE Network node...`, 'info');
            await delay(800);
            log(`Connection established. Latency: 12ms.`, 'success');
            await delay(500);
            log(`Querying Aqulier Intelligence Engine...`, 'info');
            
            // Call Backend (Simulate 402 first)
            log(`> POST /intelligence/${ticker}`, 'warn');
            await delay(1000);
            
            // FAKE 402 RESPONSE (For Demo Visuals)
            log(`ðŸ›‘ HTTP 402 PAYMENT REQUIRED`, 'error');
            log(`Requesting 0.1 USDC via x402 protocol...`, 'warn');
            
            // Trigger Wallet Interaction (Mock)
            const confirm = window.confirm(`[x402 Protocol]\n\nRequesting Payment: 0.1 USDC\nNetwork: SKALE\n\nApprove transaction?`);
            
            if (confirm) {
                log(`Payment authorized. Broadcasting...`, 'success');
                await delay(1000);
                log(`Transaction confirmed. Access Token received.`, 'success');
                log(`Decrypting intelligence report...`, 'success');
                await delay(800);
                
                // Show Result (Simulated data fetch)
                showResult(ticker);
            } else {
                log(`Payment rejected by user. Session terminated.`, 'error');
            }
        }

        function showResult(ticker) {
            const resultBox = document.getElementById('result');
            const score = Math.floor(Math.random() * 100);
            const sentiment = score > 50 ? "BULLISH" : "BEARISH";
            
            resultBox.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <div>
                        <div style="font-size:0.8rem; color:#888;">SENTIMENT SCORE</div>
                        <div class="score-display">${score}/100</div>
                    </div>
                    <div style="text-align:right;">
                        <div style="font-size:1.5rem; color:${score>50 ? '#00ff41' : '#ff3333'}">${sentiment}</div>
                    </div>
                </div>
                <hr style="border:0; border-top:1px solid #333; margin:1rem 0;">
                <div style="font-size:0.9rem; line-height:1.5;">
                    > Whale accumulation detected on-chain.<br>
                    > Social sentiment volume increasing +15%.<br>
                    > Recommendation: <strong>ACCUMULATE</strong>
                </div>
            `;
            resultBox.style.display = 'block';
            log(`Report rendered successfully.`, 'success');
        }

        function delay(ms) { return new Promise(res => setTimeout(res, ms)); }
    </script>
</body>
</html>
